<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <title>Realizar Pedido</title>
    <link rel="stylesheet" href="css/font.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/pedido.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</head>
<body class="container">
    <header>
        <nav class="mt-2 navbar navbar-expand-sm">
            <div class="container-fluid">
              <a class="navbar-brand" href="../index.html">
                <img src="img/saltykitty.png" class="logo">
            </a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="../index.html">Produtos</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
    </header>
    
    <section class="p-3" id="head">
      <div class="d-flex flex-column">
          <div class="row d-flex mb-3 pb-3" style="border-bottom: 1px solid #a02c55;">
              <div style="width: 80%;">
                  <h2>Pedido</h2>
                  <span>Escolha os ingredientes</span>
              </div>
              <div class="d-flex justify-content-end mt-4" style="width: 19%;">
                  <div id="oDivConta" class="oDivConta p-4">
                      <div class="mb-4">
                          <span>Olá, <b>Usuário</b></span>
                      </div>
                      <div class="mb-1">
                          <span class="optC">Minha conta</span>
                      </div>
                      <div>
                          <span style="cursor: pointer;" id="btnSair" class="optC">Sair</span>
                      </div>
                  </div>
                  
              </div>
          </div>
    <div id="ingredients-list">
      <div class="ingredient">
        <label for="frango">Frango</label>
        <input type="checkbox" id="frango" name="ingredient" value="frango" checked>
      </div>
      <div class="ingredient">
        <label for="milho">Milho</label>
        <input type="checkbox" id="milho" name="ingredient" value="milho" checked>
      </div>
      <div class="ingredient">
        <label for="tomate">Tomate</label>
        <input type="checkbox" id="tomate" name="ingredient" value="tomate" checked>
      </div>
      <div class="ingredient">
        <label for="maionese">Maionese</label>
        <input type="checkbox" id="maionese" name="ingredient" value="maionese" checked>
      </div>
      <div class="ingredient">
        <label for="azeitona">Azeitona</label>
        <input type="checkbox" id="azeitona" name="ingredient" value="azeitona" checked>
      </div>
      <div class="ingredient">
        <label for="cenoura">Cenoura</label>
        <input type="checkbox" id="cenoura" name="ingredient" value="cenoura" checked>
      </div>
      <div class="ingredient">
        <label for="ervilha">Ervilha</label>
        <input type="checkbox" id="ervilha" name="ingredient" value="ervilha" checked>
      </div>
      <div class="ingredient">
        <label for="queijo-ralado">Queijo ralado</label>
        <input type="checkbox" id="queijo-ralado" name="ingredient" value="queijo ralado" checked>
      </div>
    </div>
    <div class="nomeRequest mt-2" id="nomeRequest">
      Insira seu nome para finalizar o pedido<br>
      <input type="text" id="nome" class="form-control mt-2" style="width: 400px;">
      <span id="nomeObr" style="display: none"><small>Este campo é obrigatório</small></span>
      <button class="button mt-5" id="button" onclick="alterView()">Realizar Pedido</button>
    </div>
    
    

    <div class="realized justify-content-center align-items-center" id="realized">
      <img src="img/checked.png" alt="">
      <h2>Pedido realizado com sucesso!</h2>
    </div>
    <script src="pedido.js"></script>   
</body>
  <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
      import { getDatabase, set, ref, push, child, update, onValue} from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyClbeYWlsKsWVAC1QQf8K9W22kNrjTMzng",
        authDomain: "roginookashi.firebaseapp.com",
        projectId: "roginookashi",
        storageBucket: "roginookashi.appspot.com",
        messagingSenderId: "76735896471",
        appId: "1:76735896471:web:5df7cfee5a41411dae02d2",
        measurementId: "G-CRCX9RJ6DX"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      const checkboxes = document.getElementsByName('ingredient')
      
      button.addEventListener('click', (e) =>{
        if(document.getElementById('nome').value != ""){
            for(var i=4;i<checkboxes.length;i++){
              if(checkboxes[i].checked ){
                checkboxes[i].value = "Sim"
              }else{
                checkboxes[i].value = "Não"
              }
            }

            var nome = document.getElementById("nome").value
            var produto = "Bolo Salgado"
            var A = checkboxes[4].value
            var C = checkboxes[5].value
            var E = checkboxes[6].value
            var Q = checkboxes[7].value

            const userId = push(child(ref(database), 'pedidos')).key

            set(ref(database, 'pedidos/' + userId), {
            nome: nome,
            produto: produto,
            A: A,
            C: C,
            E: E,
            Q: Q,
        });
      }else{
        document.getElementById("nomeObr").style.display = "block"
      }
    })
  
</script>
</html>